---
layout: post
title: Adding features/functionality to ASP.Net MVC 3
date: '2011-12-07T08:08:00.000Z'
author: Rob
tags:
- Programming
- ".Net"
- ASP MVC
modified_time: '2013-10-17T21:53:15.236+01:00'
blogger_id: tag:blogger.com,1999:blog-7583560609041238092.post-7545499865044613282
blogger_orig_url: http://robertbeal.blogspot.com/2011/12/adding-featuresfunctionality-to-aspnet.html
---

<p>Out of the box ASP MVC is a good framework, although in my opinion lacking quite a lot of functionality. That isn't a problem though as one of the greatest features of ASP MVC is how easily extensible it is. I've been working on my own framework, <a href="https://bitbucket.org/robertbeal/automvc" target="_blank">AutoMvc</a>, to extend ASP MVC. This article will go over some of the additions I have made.</p><a name='more'></a> <h3>Restful Routing</h3> <p>I'm currently still working on this feature to allow for non-conventional routes, but at the moment it typically works by the following convention.</p> <p>UsersController =&gt; /users</p><p>Within that controller you have to implement the following methods (ie actions), Index, Get, Post, Put, Delete. ie</p> <pre  style="font-family:arial;font-size:12px;border:1px dashed #CCCCCC;width:99%;height:auto;overflow:auto;background:#f0f0f0;;background-image:URL(http://2.bp.blogspot.com/_z5ltvMQPaa8/SjJXr_U2YBI/AAAAAAAAAAM/46OqEP32CJ8/s320/codebg.gif);padding:0px;color:#000000;text-align:left;line-height:20px;"><code style="color:#000000;word-wrap:normal;"> public ActionResult Get(int id)  <br /> {  <br />   return View();  <br /> }  <br /></code></pre> <ul>    <li>Index() =&gt; /users (GET)</li>	     <li>Get(int id) =&gt; /users/123 (GET)</li>    <li>Post(User user) =&gt; /users (POST)</li>    <li>Put(User user) =&gt;/users/123 (PUT or form-based POST as PUT)</li>    <li>Delete(int id) =&gt; /users/123 (DELETE or form-based POST as DELETE)</li></ul> <p>This helps create a clean, conventional way of handling resources and URL's. It also makes developers think about what they are creating which I find in turn makes for a cleaner design.</p> <p>My <a href="https://bitbucket.org/robertbeal/automvc/src/7f82e561eead/src/Framework/Web/Mvc/Routing/RouteBuilder.cs" target="_blank">RouteBuilder</a> is based off the now outdated, Simply Restful Routing (that was part of MvcContrib), but I have since overhauled a lot of it.</p> <h3>Lower-case Routing</h3> <p>Just because I like things to be nice and clean, and it can cause less confusion for search bots crawling your site, I lower-case all routing in my framework. You can view the source code <a href="https://bitbucket.org/robertbeal/automvc/src/7f82e561eead/src/Framework/Web/Mvc/Routing/LowercaseRoute.cs" target="_blank">here</a>.</p> <h3>Multiple Views Per Action</h3> <p>Rather than create more actions to return exactly the same data but a different view, or clog up your Action method with if statements deciding which view to return, you can implement a custom view engine to do the hard work for you.</p> <p>I have extended the standard view engine by getting it to check the QueryString and RouteData for a "view" variable. If it exists, then the view is set to that value. For example:</p><blockquote>/users?view=summary =&gt; loads the users/summary.cshtml view<br />Html.RenderAction("Get", "Users", new { id = 123, view = "info" }) =&gt; loads the users/info.cshtml view </blockquote> <p>This means your action method are kept clean and oblivious as to which view to return. Here is the source code for my <a href="https://bitbucket.org/robertbeal/automvc/src/7f82e561eead/src/Framework/Web/Mvc/ViewEngine.cs" target="_blank">ViewEngine</a>.</p> <h3>Json/Xml Accept-Types</h3> <p>Given how often they are used, especially if using JQuery on your site, then you'll want to be able to return Json and XML from your action methods. Again this can be done without clogging up your Action methods by using an ActionFilterAttribute. The following can return HTML, XML or Json:</p> <pre  style="font-family:arial;font-size:12px;border:1px dashed #CCCCCC;width:99%;height:auto;overflow:auto;background:#f0f0f0;;background-image:URL(http://2.bp.blogspot.com/_z5ltvMQPaa8/SjJXr_U2YBI/AAAAAAAAAAM/46OqEP32CJ8/s320/codebg.gif);padding:0px;color:#000000;text-align:left;line-height:20px;"><code style="color:#000000;word-wrap:normal;"> public ActionResult Index()  <br /> {  <br />   var users = Session.Get&amp;lt;User&amp;gt;();  <br />   return View(users);  <br /> }  <br /></code></pre> <p>As long as your objects are serializable then it will return whatever you specify via QueryString, Extension or Accept-Type. See my <a href="https://bitbucket.org/robertbeal/automvc/src/7f82e561eead/src/Framework/Web/Mvc/Attributes/ResponseTypeAttribue.cs" target="_blank">ResponseTypeFilter</a> and <a href="https://bitbucket.org/robertbeal/automvc/src/7f82e561eead/src/Framework/Web/Request/Accept.cs" target="_blank">Accept</a> classes for the implementation.</p> <h3>Anonymouse Headers</h3> <p>One thing I can't stand is all the additional headers that ASP MVC adds to the response. I like to clear these out. Sure if a hacker wants to really know if I'm using ASP.Net they can find out, but it doesn't excuse having clean headers given how easy the implementation is. I created a <a href="https://bitbucket.org/robertbeal/automvc/src/7f82e561eead/src/Framework/Web/Modules/CloakHttpHeaderModule.cs" target="_blank">CloakHttpHeaderModule</a> to do the above for me.</p> <h3>SEO Friendly Urls</h3> <p>Given how important SEO is these days, not just in terms of search bots but what the user see's when looking through search result, I created a set of helper methods for easily checking the "slug" of a url.</p> <p>For example, the url, /posts/123/improving-seo. If someone goes to the url /posts/123/a-nasty-slug-foo-bar then they are redirected via 301 to /posts/123/improving-seo</p> <p>It does require implementation in your controller in the form of:</p> <pre  style="font-family:arial;font-size:12px;border:1px dashed #CCCCCC;width:99%;height:auto;overflow:auto;background:#f0f0f0;;background-image:URL(http://2.bp.blogspot.com/_z5ltvMQPaa8/SjJXr_U2YBI/AAAAAAAAAAM/46OqEP32CJ8/s320/codebg.gif);padding:0px;color:#000000;text-align:left;line-height:20px;"><code style="color:#000000;word-wrap:normal;"> public ActionResult Get(int id)  <br /> {  <br />   var post = Session.Get&amp;lt;Post&amp;gt;(id);  <br />   if(!MatchesSlug(post.Name))  <br />     RedirectToSeoFriendly(post.Name);  <br />   return View(post);  <br /> }  <br /></code></pre> <p>The methods used above are implemented in my <a href="https://bitbucket.org/robertbeal/automvc/src/7f82e561eead/src/Framework/Web/Mvc/Controllers/AutoMvcController.cs" target="_blank">AutoMvcController</a> class which extends the standard Controller class.</p>